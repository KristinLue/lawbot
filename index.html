<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>é’æ³•é€šèªéŸ³ AI å°å¹«æ‰‹</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f9f9f9; }
    h2 { color: #003366; }
    input, button { width: 100%; padding: 10px; margin-top: 10px; }
    #answer { margin-top: 15px; white-space: pre-wrap; background: #e6f2ff; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h2>ğŸ¤ é’æ³•é€š AI æ³•å¾‹èªéŸ³åŠ©ç†</h2>
  <input type="text" id="question" placeholder="è«‹è¼¸å…¥æˆ–èªªå‡ºä½ çš„æ³•å¾‹å•é¡Œ">
  <button onclick="startSpeechRecognition()">ğŸ™ï¸ èªéŸ³è¼¸å…¥</button>
  <button onclick="ask()">ğŸ“¤ é€å‡ºå•é¡Œ</button>
  <div id="answer">ğŸ‘‡ å•é¡Œç­”æ¡ˆæœƒå‡ºç¾åœ¨é€™è£¡</div>

  <script>
    const OPENAI_API_KEY = "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";

    async function ask() {
      const question = document.getElementById("question").value;
      const answerDiv = document.getElementById("answer");

      if (!question) {
        answerDiv.innerText = "è«‹å…ˆè¼¸å…¥æˆ–èªªå‡ºå•é¡Œå–”ï½";
        return;
      }
      
      answerDiv.innerText = "ğŸ§  AI å°å¹«æ‰‹æ€è€ƒä¸­...";
      
      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${OPENAI_API_KEY}`
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [
              { role: "system", content: "ä½ æ˜¯ä¸€ä½è¦ªåˆ‡çš„å°ç£æ³•å¾‹ AI åŠ©ç†ï¼Œè«‹ç°¡å–®æ˜ç¢ºå›ç­”æ°‘çœ¾æ³•å¾‹å•é¡Œã€‚" },
              { role: "user", content: question }
            ]
          })
        });

        console.log('Response Status:', response.status);  // æŸ¥çœ‹å›æ‡‰ç‹€æ…‹
        const result = await response.json();
        console.log('API Response:', result);  // æŸ¥çœ‹å›æ‡‰å…§å®¹

        const reply = result.choices?.[0]?.message?.content || "âš ï¸ æŠ±æ­‰ï¼ŒAI æ²’æœ‰å›æ‡‰";
        answerDiv.innerText = reply;

      } catch (err) {
        console.error('Error:', err);  // é¡¯ç¤ºéŒ¯èª¤
        answerDiv.innerText = "ğŸš« ç™¼ç”ŸéŒ¯èª¤ï¼š" + err.message;
      }
    }

    function startSpeechRecognition() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "zh-TW";
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.start();

      recognition.onresult = function(event) {
        const speechResult = event.results[0][0].transcript;
        document.getElementById("question").value = speechResult;
      };

      recognition.onerror = function(event) {
        alert("ğŸ™ï¸ èªéŸ³è¾¨è­˜å¤±æ•—ï¼š" + event.error);
      };
    }
  </script>
</body>
</html>
