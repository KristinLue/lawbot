<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>é’æ³•é€š AI æ³•å¾‹è«®è©¢</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    h2 { color: #003366; }
    input, button { width: 100%; padding: 10px; margin-top: 10px; }
    #answer { margin-top: 15px; white-space: pre-wrap; background: #f0f0f0; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h2>é’æ³•é€š AI æ³•å¾‹å°å¹«æ‰‹</h2>
  <input type="text" id="question" placeholder="è«‹è¼¸å…¥ä½ çš„æ³•å¾‹å•é¡Œ">
  <button onclick="ask()">é€å‡º</button>
  <button onclick="startListening()">ğŸ¤ èªéŸ³è¼¸å…¥</button>
  <div id="answer">ğŸ‘‡ è¼¸å…¥å•é¡Œå¾Œæœƒé¡¯ç¤ºç­”æ¡ˆ</div>

  <script>
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'zh-TW';

    function startListening() {
      recognition.start();
      const q = document.getElementById('question');
      q.placeholder = 'æ­£åœ¨è†è½ä¸­â€¦è«‹èªªå‡ºä½ çš„å•é¡Œ';

      recognition.onresult = function(event) {
        q.value = event.results[0][0].transcript;
        q.placeholder = 'è«‹è¼¸å…¥ä½ çš„æ³•å¾‹å•é¡Œ';
      };

      recognition.onerror = function(event) {
        alert('èªéŸ³è¾¨è­˜éŒ¯èª¤ï¼š' + event.error);
        q.placeholder = 'è«‹è¼¸å…¥ä½ çš„æ³•å¾‹å•é¡Œ';
      };
    }

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'zh-TW';
      speechSynthesis.speak(utterance);
    }

    async function ask() {
      const q = document.getElementById('question').value;
      const a = document.getElementById('answer');
      if (!q) return a.innerText = "è«‹å…ˆè¼¸å…¥å•é¡Œå–”ï½";

      a.innerText = "AI å°å¹«æ‰‹æ€è€ƒä¸­...";

      const response = await fetch("https://api.chatanywhere.cn/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer sk-antidebug"
        },
        body: JSON.stringify({
          model: "gpt-3.5-turbo",
          messages: [
            { role: "system", content: "ä½ æ˜¯ä¸€ä½è¦ªåˆ‡çš„å°ç£æ³•å¾‹ AI åŠ©ç†ï¼Œè«‹ç°¡å–®æ˜ç¢ºå›ç­”æ°‘çœ¾æ³•å¾‹å•é¡Œã€‚" },
            { role: "user", content: q }
          ]
        })
      });

      const result = await response.json();
      const reply = result.choices?.[0]?.message?.content || "æŠ±æ­‰ï¼ŒAI æ²’æœ‰å›æ‡‰ã€‚";
      a.innerText = reply;
      speak(reply);
    }
  </script>
</body>
</html>
